<% @title = @user.nickname %>

<div class="container white-background d-flex my-3">
  <%= image_tag @user.avatar, alt: @user.nickname, class: "profile-avatar"%>
    <ul>
      <li><%= @user.age %> ans</li>
      <li><%= @user.city %></li>
    </ul>
</div>

<center><% if @user != current_user && !@friends.include?(current_user) %>
  <%= simple_form_for @new_friend do |f| %>
    <%= f.input :friend_id, :as => :hidden, :input_html => { :value => current_user.id }  %>
    <%= f.input :user_id, :as => :hidden, :input_html => { :value => @user.id }  %>
    <%= f.button :submit, "Ajouter en ami.e", class: "btn btn-danger" %>
  <% end %>
<% end %></center>

<% if @friends.length != 0 %>
  <h3 class="m-3">Liste d'ami.e.s</h3>
  <div data-controller="display-all" class="container white-background">
    <div data-display-all-target="summary">
      <div class="d-flex gap1">
        <%= render 'friend_relationship_partial', collection: @friends[0,5] %>
      </div>
      <a data-action="click->display-all#displaySummary" data-display-all-target="summary">voir plus</a>
    </div>
    <div class="d-none" data-display-all-target="summary_all">
      <div class="d-flex gap1">
        <%= render 'friend_relationship_partial', collection: @friends %>
      </div>
      <a data-action="click->display-all#displaySummary" data-display-all-target="summary">voir moins</a>
    </div>
  </div>
<% end %>
